<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>lwcComPubSub/lwcComPubSub.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="LwcComBase.html">LwcComBase</a><ul class='methods'><li data-type='method'><a href="LwcComBase.html#disconnectedCallback">disconnectedCallback</a></li><li data-type='method'><a href="LwcComBase.html#gComNextPage">gComNextPage</a></li><li data-type='method'><a href="LwcComBase.html#gComPreviousPage">gComPreviousPage</a></li><li data-type='method'><a href="LwcComBase.html#gfnComApex">gfnComApex</a></li><li data-type='method'><a href="LwcComBase.html#gfnComCloseModal">gfnComCloseModal</a></li><li data-type='method'><a href="LwcComBase.html#gfnComConnectedCallback">gfnComConnectedCallback</a></li><li data-type='method'><a href="LwcComBase.html#gfnComFireDispatch">gfnComFireDispatch</a></li><li data-type='method'><a href="LwcComBase.html#gfnComHandleError">gfnComHandleError</a></li><li data-type='method'><a href="LwcComBase.html#gfnComRenderDynamicComponent">gfnComRenderDynamicComponent</a></li><li data-type='method'><a href="LwcComBase.html#gfnComRenderedCallback">gfnComRenderedCallback</a></li><li data-type='method'><a href="LwcComBase.html#gfnComRenderInitDynamicComponent">gfnComRenderInitDynamicComponent</a></li><li data-type='method'><a href="LwcComBase.html#gfnComRereshApex">gfnComRereshApex</a></li><li data-type='method'><a href="LwcComBase.html#gfnComSetPagingInfo">gfnComSetPagingInfo</a></li><li data-type='method'><a href="LwcComBase.html#gfnComShowModal">gfnComShowModal</a></li><li data-type='method'><a href="LwcComBase.html#gfnComShowToast">gfnComShowToast</a></li><li data-type='method'><a href="LwcComBase.html#gfnComShowToastDefaultSuccess">gfnComShowToastDefaultSuccess</a></li><li data-type='method'><a href="LwcComBase.html#gfnComShowToastSelf">gfnComShowToastSelf</a></li><li data-type='method'><a href="LwcComBase.html#gfnComWiredApex">gfnComWiredApex</a></li><li data-type='method'><a href="LwcComBase.html#gfnComWiredAsync">gfnComWiredAsync</a></li><li data-type='method'><a href="LwcComBase.html#gfnComWiredSync">gfnComWiredSync</a></li></ul></li><li><a href="LwcComClass.html">LwcComClass</a></li><li><a href="LwcComClass.DynamicComponentClass.html">DynamicComponentClass</a></li><li><a href="LwcComData.html">LwcComData</a></li><li><a href="LwcComData.EtcData.html">EtcData</a></li><li><a href="LwcComData.PagingData.html">PagingData</a></li><li><a href="LwcComData.ToastData.html">ToastData</a></li><li><a href="LwcComNaviService.html">LwcComNaviService</a><ul class='methods'><li data-type='method'><a href="LwcComNaviService.html#.gfnSvcNaviByCommNamedPage">gfnSvcNaviByCommNamedPage</a></li><li data-type='method'><a href="LwcComNaviService.html#.gfnSvcNaviByNamedPage">gfnSvcNaviByNamedPage</a></li><li data-type='method'><a href="LwcComNaviService.html#.gfnSvcNaviByPageReference">gfnSvcNaviByPageReference</a></li><li data-type='method'><a href="LwcComNaviService.html#.gfnSvcNaviByStdNamedPage">gfnSvcNaviByStdNamedPage</a></li><li data-type='method'><a href="LwcComNaviService.html#.gfnSvcNaviByStdNaviItemPage">gfnSvcNaviByStdNaviItemPage</a></li><li data-type='method'><a href="LwcComNaviService.html#.gfnSvcNaviByStdObjectPage">gfnSvcNaviByStdObjectPage</a></li><li data-type='method'><a href="LwcComNaviService.html#.gfnSvcNaviByStdRecordPage">gfnSvcNaviByStdRecordPage</a></li><li data-type='method'><a href="LwcComNaviService.html#.gfnSvcNaviByWebPage">gfnSvcNaviByWebPage</a></li></ul></li><li><a href="LwcComPubSub.html">LwcComPubSub</a><ul class='methods'><li data-type='method'><a href="LwcComPubSub.html#.gfnPubSubFireEvent">gfnPubSubFireEvent</a></li><li data-type='method'><a href="LwcComPubSub.html#.gfnPubSubRegisterListener">gfnPubSubRegisterListener</a></li><li data-type='method'><a href="LwcComPubSub.html#.gfnPubSubSamePageRef">gfnPubSubSamePageRef</a></li><li data-type='method'><a href="LwcComPubSub.html#.gfnPubSubUnregisterAllListeners">gfnPubSubUnregisterAllListeners</a></li><li data-type='method'><a href="LwcComPubSub.html#.gfnPubSubUnRegisterListener">gfnPubSubUnRegisterListener</a></li></ul></li><li><a href="LwcComPubSubAura.html">LwcComPubSubAura</a><ul class='methods'><li data-type='method'><a href="LwcComPubSubAura.html#connectedCallback">connectedCallback</a></li><li data-type='method'><a href="LwcComPubSubAura.html#gfnPubSubAuraFireEvent">gfnPubSubAuraFireEvent</a></li><li data-type='method'><a href="LwcComPubSubAura.html#gfnPubSubAuraRegisterListener">gfnPubSubAuraRegisterListener</a></li><li data-type='method'><a href="LwcComPubSubAura.html#gfnPubSubAuraUnregisterAllListeners">gfnPubSubAuraUnregisterAllListeners</a></li><li data-type='method'><a href="LwcComPubSubAura.html#gfnPubSubAuraUnregisterListener">gfnPubSubAuraUnregisterListener</a></li></ul></li><li><a href="LwcComThirdPartyService.html">LwcComThirdPartyService</a><ul class='methods'><li data-type='method'><a href="LwcComThirdPartyService.html#.gfnSvcGetLodash">gfnSvcGetLodash</a></li></ul></li><li><a href="LwcComUtil.html">LwcComUtil</a></li><li><a href="LwcComUtil.ApexUtil.html">ApexUtil</a><ul class='methods'><li data-type='method'><a href="LwcComUtil.ApexUtil.html#.createSearchReqParams">createSearchReqParams</a></li><li data-type='method'><a href="LwcComUtil.ApexUtil.html#.setSearchReqData">setSearchReqData</a></li></ul></li><li><a href="LwcComUtil.ArrayUtil.html">ArrayUtil</a><ul class='methods'><li data-type='method'><a href="LwcComUtil.ArrayUtil.html#.isArray">isArray</a></li><li data-type='method'><a href="LwcComUtil.ArrayUtil.html#.isEmpty">isEmpty</a></li><li data-type='method'><a href="LwcComUtil.ArrayUtil.html#.isNotEmpty">isNotEmpty</a></li><li data-type='method'><a href="LwcComUtil.ArrayUtil.html#.makeArray">makeArray</a></li></ul></li><li><a href="LwcComUtil.ClientUtil.html">ClientUtil</a><ul class='methods'><li data-type='method'><a href="LwcComUtil.ClientUtil.html#.getBrowser">getBrowser</a></li><li data-type='method'><a href="LwcComUtil.ClientUtil.html#.getOperatingSystem">getOperatingSystem</a></li></ul></li><li><a href="LwcComUtil.CommunityUtil.html">CommunityUtil</a><ul class='methods'><li data-type='method'><a href="LwcComUtil.CommunityUtil.html#.isCommunity">isCommunity</a></li></ul></li><li><a href="LwcComUtil.ComUtil.html">ComUtil</a><ul class='methods'><li data-type='method'><a href="LwcComUtil.ComUtil.html#.deepClone">deepClone</a></li></ul></li><li><a href="LwcComUtil.CsvUtil.html">CsvUtil</a><ul class='methods'><li data-type='method'><a href="LwcComUtil.CsvUtil.html#.exportCsv">exportCsv</a></li><li data-type='method'><a href="LwcComUtil.CsvUtil.html#.exportCsvWithData">exportCsvWithData</a></li></ul></li><li><a href="LwcComUtil.DateUtil.html">DateUtil</a><ul class='methods'><li data-type='method'><a href="LwcComUtil.DateUtil.html#.getISOToday">getISOToday</a></li><li data-type='method'><a href="LwcComUtil.DateUtil.html#.getToday">getToday</a></li><li data-type='method'><a href="LwcComUtil.DateUtil.html#.isDate">isDate</a></li></ul></li><li><a href="LwcComUtil.ElementUtil.html">ElementUtil</a><ul class='methods'><li data-type='method'><a href="LwcComUtil.ElementUtil.html#.getDependentPicklist">getDependentPicklist</a></li><li data-type='method'><a href="LwcComUtil.ElementUtil.html#.getInputCheckedValues">getInputCheckedValues</a></li><li data-type='method'><a href="LwcComUtil.ElementUtil.html#.makeArrayQuerySelectorAllElement">makeArrayQuerySelectorAllElement</a></li><li data-type='method'><a href="LwcComUtil.ElementUtil.html#.makeDependentPicklistOptions">makeDependentPicklistOptions</a></li><li data-type='method'><a href="LwcComUtil.ElementUtil.html#.makeOptions">makeOptions</a></li></ul></li><li><a href="LwcComUtil.LogUtil.html">LogUtil</a><ul class='methods'><li data-type='method'><a href="LwcComUtil.LogUtil.html#.comLog">comLog</a></li><li data-type='method'><a href="LwcComUtil.LogUtil.html#.log">log</a></li></ul></li><li><a href="LwcComUtil.PropertyUtil.html">PropertyUtil</a><ul class='methods'><li data-type='method'><a href="LwcComUtil.PropertyUtil.html#.isEmpty">isEmpty</a></li><li data-type='method'><a href="LwcComUtil.PropertyUtil.html#.isNotEmpty">isNotEmpty</a></li><li data-type='method'><a href="LwcComUtil.PropertyUtil.html#.isTrue">isTrue</a></li><li data-type='method'><a href="LwcComUtil.PropertyUtil.html#.setDefault">setDefault</a></li></ul></li><li><a href="LwcComUtil.ProxyUtil.html">ProxyUtil</a><ul class='methods'><li data-type='method'><a href="LwcComUtil.ProxyUtil.html#.toObject">toObject</a></li></ul></li><li><a href="LwcComUtil.TypeUtil.html">TypeUtil</a><ul class='methods'><li data-type='method'><a href="LwcComUtil.TypeUtil.html#.isArray">isArray</a></li><li data-type='method'><a href="LwcComUtil.TypeUtil.html#.isBoolean">isBoolean</a></li><li data-type='method'><a href="LwcComUtil.TypeUtil.html#.isDate">isDate</a></li><li data-type='method'><a href="LwcComUtil.TypeUtil.html#.isError">isError</a></li><li data-type='method'><a href="LwcComUtil.TypeUtil.html#.isFunction">isFunction</a></li><li data-type='method'><a href="LwcComUtil.TypeUtil.html#.isNull">isNull</a></li><li data-type='method'><a href="LwcComUtil.TypeUtil.html#.isNumber">isNumber</a></li><li data-type='method'><a href="LwcComUtil.TypeUtil.html#.isObject">isObject</a></li><li data-type='method'><a href="LwcComUtil.TypeUtil.html#.isRegExp">isRegExp</a></li><li data-type='method'><a href="LwcComUtil.TypeUtil.html#.isString">isString</a></li><li data-type='method'><a href="LwcComUtil.TypeUtil.html#.isUndefined">isUndefined</a></li></ul></li><li><a href="LwcComUtil.WindowUtil.html">WindowUtil</a><ul class='methods'><li data-type='method'><a href="LwcComUtil.WindowUtil.html#.getURIParams">getURIParams</a></li></ul></li><li><a href="MixinBuilder.html">MixinBuilder</a><ul class='methods'><li data-type='method'><a href="MixinBuilder.html#with">with</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#IS_DEFAULT_APEX_RESULT_LOG_JSON">IS_DEFAULT_APEX_RESULT_LOG_JSON</a></li><li><a href="global.html#IS_DEFAULT_PURE_ERROR">IS_DEFAULT_PURE_ERROR</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">lwcComPubSub/lwcComPubSub.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/****************************************************************************************
 * @filename      : lwcComPubSub
 * @author        : I2max
 * @date          : 2020-04-01
 * @group         :
 * @group-content :
 * @description   :
 * @reference     :
 * @release       : v1.0.0
 * @copyright     : Copyright © I2max. All Rights Reserved.
 * @modification Log
 * ===============================================================
 * ver     date               author         description
 * ===============================================================
   0.1     2020-04-01         I2MAX            Create
 ****************************************************************************************/
/**
 * 공통 Publish / Subscribe 이벤트 처리 Service
 * 세잍즈포스의 receipe 소스를 참조한 소스임.
 * 기본적으로 LMS(Lighnting Message Channel)를 이용하여 appication event를 처리하는 것을 추천하며,
 * LMS를 사용하지 못할 경우 사용할 것.
 * A basic pub-sub mechanism for sibling component communication
 * TODO - adopt standard flexipage sibling communication mechanism when it's available.
 * @class
 * @hideconstructor
 */
const LwcComPubSub = {

    /**
     * 등록 이벤트 객체
     * @type {object}
     * @member
     */
    events : {},

    /**
     * Confirm that two page references have the same attributes
     * @function
     * @param {object} pageRef1 - The first page reference
     * @param {object} pageRef2 - The second page reference
     * @since 1.0.0
     */
    gfnPubSubSamePageRef : (pageRef1, pageRef2) => {
        const obj1 = pageRef1.attributes;
        const obj2 = pageRef2.attributes;
        return Object.keys(obj1)
            .concat(Object.keys(obj2))
            .every(key => {
                return obj1[key] === obj2[key];
            });
    },

    /**
     * Registers a callback for an event
     * @function
     * @param {string} eventName - Name of the event to listen for.
     * @param {function} callback - Function to invoke when said event is fired.
     * @param {object} thisArg - The value to be passed as the this parameter to the callback function is bound.
     * @since 1.0.0
     */
    gfnPubSubRegisterListener : (eventName, callback, thisArg) => {
        // Checking that the listener has a pageRef property. We rely on that property for filtering purpose in gfnPubSubFireEvent()
        if (!thisArg.gComPageRef) {
            throw new Error(
                'pubsub listeners need a "@wire(CurrentPageReference) gComPageRef" property'
            );
        }

        if (!LwcComPubSub.events[eventName]) {
            LwcComPubSub.events[eventName] = [];
        }

        const duplicate = LwcComPubSub.events[eventName].find(listener => {
            return listener.callback === callback &amp;&amp; listener.thisArg === thisArg;
        });

        if (!duplicate) {
            LwcComPubSub.events[eventName].push({ callback, thisArg });
        }
    },

    /**
     * Unregisters a callback for an event
     * @function
     * @param {string} eventName - Name of the event to unregister from.
     * @param {function} callback - Function to unregister.
     * @param {object} thisArg - The value to be passed as the this parameter to the callback function is bound.
     * @since 1.0.0
     */
    gfnPubSubUnRegisterListener : (eventName, callback, thisArg) => {
        if (LwcComPubSub.events[eventName]) {
            LwcComPubSub.events[eventName] = LwcComPubSub.events[eventName].filter(
                listener =>
                    listener.callback !== callback || listener.thisArg !== thisArg
            );
        }
    },

    /**
     * Unregisters all event listeners bound to an object.
     * @function
     * @param {object} thisArg - All the callbacks bound to this object will be removed.
     * @since 1.0.0
     */
    gfnPubSubUnregisterAllListeners : (thisArg) => {
        Object.keys(LwcComPubSub.events).forEach(eventName => {
            LwcComPubSub.events[eventName] = LwcComPubSub.events[eventName].filter(
                listener => listener.thisArg !== thisArg
            );
        });
    },

    /**
     * Fires an event to listeners.
     * @function
     * @param {object} pageRef - Reference of the page that represents the event scope.
     * @param {string} eventName - Name of the event to fire.
     * @param {*} payload - Payload of the event to fire.
     * @since 1.0.0
     */
    gfnPubSubFireEvent : (pageRef, eventName, payload) => {
        if (LwcComPubSub.events[eventName]) {
            const listeners = LwcComPubSub.events[eventName];
            listeners.forEach(listener => {
                if (LwcComPubSub.gfnPubSubSamePageRef(pageRef, listener.thisArg.gComPageRef)) {
                    try {
                        listener.callback.call(listener.thisArg, payload);
                    } catch (error) {
                        // fail silently
                        console.error(error);
                    }
                }
            });
        }
    }
}

export { LwcComPubSub };</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Thu Apr 01 2021 11:21:39 GMT+0900 (대한민국 표준시) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
